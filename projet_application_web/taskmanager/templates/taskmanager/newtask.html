{% extends "base.html" %}


{% block path %}
<h5 class="path">
    <a href="{% url 'projects' %}">Projects</a>
    /
    {% if task %}
    <a href="{% url 'project' task.project.id %}">{{ task.project.name }}</a>
    /
    <a href="{% url 'task' task.id %}">{{ task.name }}</a>
    {% else %}
    <a href="{% url 'project' project.id %}">{{ project.name }}</a>
    {% endif %}
</h5>
{% endblock %}

{% block content %}

{% if task %}
<h1 class="display-2" >{{ task.project.name }}</h1>
<h2 class="display-3">Edit task</h2>
{% else %}
<h1 class="display-2" >{{ project.name }}</h1>
{% endif %}
<br>



<form action="" method="post">
    {% csrf_token %}
    <div class="form-group row">
        <label for="id_name" class="col-sm-2 col-form-label">Title :</label>
        <div class="col-sm-10">
            <input type="text" name="name" class="form-control" id="id_name" placeholder="Name" required>
        </div>
    </div>

    <div class="form-group row">
        <label for="id_description" class="col-sm-2 col-form-label">Description :</label>
        <div class="col-sm-10">
            <textarea name="description" class="form-control" id="id_description" placeholder="Description..." required></textarea>
        </div>
    </div>

    <div class="form-group row">
        <label for="id_assignee" class="col-sm-2 col-form-label">Assignee :</label>
        <div class="col-sm-10">
            <select name="assignee" id="id_assignee" class="form-control" required>
                <option value="" selected>---------</option>
                {% for assignee in assignees %}
                <option value="{{ assignee.id }}">
                    {% if assignee.first_name %}
                    {{ assignee.first_name }} {{ assignee.last_name }}
                    {% else %}
                    {{ assignee.username }}
                    {% endif %}
                </option>
                {% endfor %}}
            </select>
        </div>
    </div>

    <div class="form-group row">
        <label for="id_start_date" class="col-sm-2 col-form-label">Start date :</label>
            <div class="col-sm-10">
        <input type="date" name="start_date" class="form-control" id="id_start_date" required>
        </div>
    </div>

    <div class="form-group row">
        <label for="id_due_date" class="col-sm-2 col-form-label">Due date :</label>
        <div class="col-sm-10">
            <input type="date" name="due_date" class="form-control" id="id_due_date" required>
        </div>
    </div>

    <div class="form-group row">
        <label for="id_priority" class="col-sm-2 col-form-label">Priority :</label>
        <div class="col-sm-10">
            <input type="number" name="priority" class="form-control" id="id_priority" required>
        </div>
    </div>

    <div class="form-group row">
        <label for="id_status" class="col-sm-2 col-form-label">Status :</label>
        <div class="col-sm-10">
            <select name="status" class="form-control" id="id_status" required>
                <option value="" selected>---------</option>
                {% for status in all_status %}
                <option value="{{ status.id }}">{{ status.name }}</option>
                {% endfor %}}
            </select>
        </div>
    </div>

    <div class="form-row">
        <div class="col">
            {% if task %}
            <button type="submit" class="btn btn-primary btn-md">Save</button>
            {% else %}
            <button type="submit" class="btn btn-primary btn-md">Add</button>
            {% endif %}
        </div>
    </div>
</form>
{% endblock %}