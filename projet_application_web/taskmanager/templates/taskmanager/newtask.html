{% extends "base.html" %}


{% block path %}
<h5 class="path">
    <a href="/taskmanager/projects">Projects</a>
    /
    {% if task %}
    <a href="/taskmanager/project/{{ task.project.id }}">{{ task.project.name }}</a>
    /
    <a href="/taskmanager/task/{{ task.id }}">{{ task.name }}</a>
    {% else %}
    <a href="/taskmanager/project/{{ project.id }}">{{ project.name }}</a>
    {% endif %}
</h5>
{% endblock %}

{% block content %}

{% if task %}
<h1 class="display-2" >{{ task.project.name }}</h1>
<h2 class="display-3">Edit task</h2>
{% else %}
<h1 class="display-2" >{{ project.name }}</h1>
{% endif %}
<br>



<form action="" method="post">
    {% csrf_token %}
    <div class="form-group row">
        <label for="name" class="col-sm-2 col-form-label">Title</label>
        <div class="col-sm-10">
            <input name="name" type="text" class="form-control" id="name" placeholder="Name">
        </div>
    </div>

    <div class="form-group row">
        <label for="description" class="col-sm-2 col-form-label">Description</label>
        <div class="col-sm-10">
            <textarea name="description" class="form-control" id="description" placeholder="Description"></textarea>
        </div>
    </div>

    <div class="form-group row">
        <label for="assignee" class="col-sm-2 col-form-label">Assignee</label>
        <div class="col-sm-10">
            <select name="assignee" id="assignee" class="form-control">
                <option value="" selected>---------</option>
                {% for assignee in assignees %}
                <option value="{{ assignee.id }}">
                    {% if assignee.first_name %}
                    {{ assignee.first_name }} {{ assignee.last_name }}
                    {% else %}
                    {{ assignee.username }}
                    {% endif %}
                </option>
                {% endfor %}}
            </select>
        </div>
    </div>

    <div class="form-group row">
        <label for="start_date" class="col-sm-2 col-form-label">Start date :</label>
            <div class="col-sm-10">
        <input name="start_date" type="date" class="form-control" id="start_date">
        </div>
    </div>

    <div class="form-group row">
        <label for="due_date" class="col-sm-2 col-form-label">Due date :</label>
        <div class="col-sm-10">
            <input name="due_date" type="date" class="form-control" id="due_date">
        </div>
    </div>

    <div class="form-group row">
        <label for="priority" class="col-sm-2 col-form-label">Priority :</label>
        <div class="col-sm-10">
            <input name="priority" type="number" class="form-control" id="priority">
        </div>
    </div>

    <div class="form-group row">
        <label for="status" class="col-sm-2 col-form-label">Status :</label>
        <div class="col-sm-10">
            <select name="status" id="status" class="form-control">
                <option value="" selected>---------</option>
                {% for status in all_status %}
                <option value="{{ status.id }}">{{ status.name }}</option>
                {% endfor %}}
            </select>
        </div>
    </div>

    {% if task %}
    <button type="submit" class="btn btn-primary">Save</button>
    {% else %}
    <button type="submit" class="btn btn-primary">Add</button>
    {% endif %}
</form>
{% endblock %}